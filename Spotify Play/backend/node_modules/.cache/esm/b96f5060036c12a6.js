let express,parseGet,parsePost,parseDelete;_036‍.x([["router",()=>router],["prefix",()=>prefix]]);_036‍.w("express",[["default",["express"],function(v){express=v}]]);_036‍.w("../middlewares/parse_get",[["parseGet",["parseGet"],function(v){parseGet=v}]]);_036‍.w("../middlewares/parse_post",[["parsePost",["parsePost"],function(v){parsePost=v}]]);_036‍.w("../middlewares/parse_delete",[["parseDelete",["parseDelete"],function(v){parseDelete=v}]]);




       const router = express.Router();
       const prefix = '/public';

const {publicStore} = require('../data/DataStore');

router.post('/unlike', parsePost, function(req,res){
  const _id = req.body.data.id;
  const result = req.handlePost(publicStore);
  let likes = publicStore['_data']['playlists']['likes'];
  let pre_likes = likes[_id]-1;
  publicStore.set(`playlists.likes.${_id}`,pre_likes);
  const toReturn={};
  toReturn[_id] = pre_likes;
  res.send(toReturn);
})

router.post('/like', parsePost, function(req,res){
  const _id = req.body.data.id;
  const result = req.handlePost(publicStore);
  let likes = publicStore['_data']['playlists']['likes'];
  let pre_likes = likes[_id]+1;
  publicStore.set(`playlists.likes.${_id}`,pre_likes);
  const toReturn={};
  toReturn[_id] = pre_likes;
  res.send(toReturn);
})

router.get('/', parseGet, function (req, res) {
  console.log("Visited");
  const result = req.handleGet(publicStore);
  if (typeof result !== 'undefined') {
    res.send(publicStore['_data'])
  }
});

router.post('/*', parsePost, function (req, res) {
  const result = req.handlePost(publicStore);
  if (typeof result !== 'undefined') {
    res.send({result})
  }
});

router.delete('/*', parseDelete, function (req, res) {
  const result = req.handleDelete(publicStore);
  if (typeof result !== 'undefined') {
    res.send({result})
  }
});
