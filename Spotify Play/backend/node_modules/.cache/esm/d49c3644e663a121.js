let express,parseGet,parsePost,parseDelete,authenticateUser,modifyUserPath;_e66‍.x([["router",()=>router],["prefix",()=>prefix]]);_e66‍.w("express",[["default",["express"],function(v){express=v}]]);_e66‍.w("../middlewares/parse_get",[["parseGet",["parseGet"],function(v){parseGet=v}]]);_e66‍.w("../middlewares/parse_post",[["parsePost",["parsePost"],function(v){parsePost=v}]]);_e66‍.w("../middlewares/parse_delete",[["parseDelete",["parseDelete"],function(v){parseDelete=v}]]);_e66‍.w("../middlewares/auth",[["authenticateUser",["authenticateUser"],function(v){authenticateUser=v}]]);_e66‍.w("../middlewares/modify_user_path",[["modifyUserPath",["modifyUserPath"],function(v){modifyUserPath=v}]]);





const fetch = require("node-fetch");

       const router = express.Router();
       const prefix = '/user';

const {userStore} = require('../data/DataStore');

/**
 * Every request needs to be from a logged in user.
 * Modify path prefixes each request with the user's name.
 */
router.use([authenticateUser, modifyUserPath]);

router.get('/callback?code=:code&state=:state', parseGet, function (req, res) {
  console.log("visited");
  _e66‍.g.console.log(req);
  const code = req.params.code;
  const result = req.handleGet(userStore);
  if (typeof result !== 'undefined') {
    res.send({'Token': code})
  }
});

router.post('/*', parsePost, function (req, res) {
  const result = req.handlePost(userStore);
  if (typeof result !== 'undefined') {
    res.send({result})
  }
});

router.delete('/*', parseDelete, function (req, res) {
  const result = req.handleDelete(userStore);
  if (typeof result !== 'undefined') {
    res.send({result})
  }
});
